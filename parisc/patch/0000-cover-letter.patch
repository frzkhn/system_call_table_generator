From 0cda6eb7d3810d7e1c430933c49af4875352a535 Mon Sep 17 00:00:00 2001
From: Firoz Khan <firoz.khan@linaro.org>
Date: Thu, 27 Sep 2018 09:35:59 +0530
Subject: [PATCH v2 0/5] System call table generation support

The purpose of this patch series is:
1. We can easily add/modify/delete system call by changing entry 
in syscall.tbl file. No need to manually edit many files.

2. It is easy to unify the system call implementation across all 
the architectures. 

The system call tables are in different format in all architecture 
and it will be difficult to manually add or modify the system calls
in the respective files manually. To make it easy by keeping a script 
and which'll generate the header file and syscall table file so this 
change will unify them across all architectures.

syscall.tbl contains the list of available system calls along with 
system call number and corresponding entry point. Add a new system 
call in this architecture will be possible by adding new entry in 
the syscall.tbl file.

Adding a new table entry consisting of:
        - System call number.
        - ABI.
        - System call name.
        - Entry point name.
        - Compat entry name, if required.

ARM, s390 and x86 architecuture does exist the similar support. I 
leverage their implementation to come up with a generic solution.

I have done the same support for work for alpha, microblaze, sparc,
m68k, mips, powerpc, sh, sparc, and xtensa. But I started sending 
the patch for one architecuture for review. Below mentioned git
repository contains more details.
Git repo:- https://github.com/frzkhn/system_call_table_generator/

Added an extra patch to keep __IGNORE* entries in asm/unistd.h.

Finally, this is the ground work for solving the Y2038 issue. We 
need to add/change two dozen of system calls to solve Y2038 issue. 
So this patch series will help to easily modify from existing 
system call to Y2038 compatible system calls.

Firoz Khan (5):
  parisc: move __IGNORE* entries to non uapi header
  parisc: add __NR_Linux_syscalls macro with __NR_syscalls
  parisc: add system call table generation support
  parisc: uapi header and system call table file generation
  parisc: add __IGNORE* entries in asm/unistd.h

 arch/parisc/Makefile                       |   4 +
 arch/parisc/include/asm/Kbuild             |   3 +
 arch/parisc/include/asm/unistd.h           |   9 +
 arch/parisc/include/uapi/asm/Kbuild        |   2 +
 arch/parisc/include/uapi/asm/unistd.h      | 380 +-----------------------
 arch/parisc/kernel/syscall.S               |  12 +-
 arch/parisc/kernel/syscall_table.S         | 459 -----------------------------
 arch/parisc/kernel/syscall_table_32.S      |  13 +
 arch/parisc/kernel/syscall_table_64.S      |  20 ++
 arch/parisc/kernel/syscalls/Makefile       |  55 ++++
 arch/parisc/kernel/syscalls/syscall_32.tbl | 342 +++++++++++++++++++++
 arch/parisc/kernel/syscalls/syscall_64.tbl | 342 +++++++++++++++++++++
 arch/parisc/kernel/syscalls/syscallhdr.sh  |  39 +++
 arch/parisc/kernel/syscalls/syscalltbl.sh  |  42 +++
 14 files changed, 881 insertions(+), 841 deletions(-)
 delete mode 100644 arch/parisc/kernel/syscall_table.S
 create mode 100644 arch/parisc/kernel/syscall_table_32.S
 create mode 100644 arch/parisc/kernel/syscall_table_64.S
 create mode 100644 arch/parisc/kernel/syscalls/Makefile
 create mode 100644 arch/parisc/kernel/syscalls/syscall_32.tbl
 create mode 100644 arch/parisc/kernel/syscalls/syscall_64.tbl
 create mode 100644 arch/parisc/kernel/syscalls/syscallhdr.sh
 create mode 100644 arch/parisc/kernel/syscalls/syscalltbl.sh

-- 
1.9.1

