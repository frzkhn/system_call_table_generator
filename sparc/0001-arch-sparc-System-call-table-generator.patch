From 1d1c09a12375b471ee3c6e2745d3a551fe742bf8 Mon Sep 17 00:00:00 2001
From: Firoz Khan <firozk@codeaurora.org>
Date: Tue, 5 Jun 2018 13:42:40 +0530
Subject: [PATCH] arch: sparc: System call table generator

- Generate include/generated/uapi/asm/unistd.h and
  include/generated/asm/syscalls_64/32/x32.h
- Add kernel/syscall_64/32/x32.S file which will in turn
  include include/generated/asm/syscalls_64/32/x32.h file
---
 arch/sparc/kernel/syscall_32.S  |  9 +++++++++
 arch/sparc/kernel/syscall_64.S  |  9 +++++++++
 arch/sparc/kernel/syscall_x32.S | 11 +++++++++++
 3 files changed, 29 insertions(+)
 create mode 100644 arch/sparc/kernel/syscall_32.S
 create mode 100644 arch/sparc/kernel/syscall_64.S
 create mode 100644 arch/sparc/kernel/syscall_x32.S

diff --git a/arch/sparc/kernel/syscall_32.S b/arch/sparc/kernel/syscall_32.S
new file mode 100644
index 0000000..8ee44c6
--- /dev/null
+++ b/arch/sparc/kernel/syscall_32.S
@@ -0,0 +1,9 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+
+#define __SYSCALL(nr, entry, nargs)    .long entry
+	
+	.data
+	.align 4
+	.globl sys_call_table
+sys_call_table:
+#include <asm/syscalls_32.h>
diff --git a/arch/sparc/kernel/syscall_64.S b/arch/sparc/kernel/syscall_64.S
new file mode 100644
index 0000000..3f50a40
--- /dev/null
+++ b/arch/sparc/kernel/syscall_64.S
@@ -0,0 +1,9 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+
+#define __SYSCALL(nr, entry, nargs)    .word entry
+	
+	.align  4
+	.globl sys_call_table64, sys_call_table
+sys_call_table64:
+sys_call_table:	
+#include <asm/syscalls_64.h>
diff --git a/arch/sparc/kernel/syscall_x32.S b/arch/sparc/kernel/syscall_x32.S
new file mode 100644
index 0000000..f69117f
--- /dev/null
+++ b/arch/sparc/kernel/syscall_x32.S
@@ -0,0 +1,11 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+
+#define __SYSCALL(nr, entry, nargs)    .word entry
+	
+	.text
+	.align	4
+#ifdef CONFIG_COMPAT
+	.globl sys_call_table32
+sys_call_table32:
+#include <asm/syscalls_x32.h>
+#endif /* CONFIG_COMPAT */
-- 
1.9.1

