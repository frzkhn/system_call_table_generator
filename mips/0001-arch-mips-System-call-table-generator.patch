From fa8c219ef9764843297f626fd94a201571ab4c70 Mon Sep 17 00:00:00 2001
From: Firoz Khan <firozk@codeaurora.org>
Date: Wed, 6 Jun 2018 12:57:22 +0530
Subject: [PATCH] arch: mips: System call table generator

- Generate include/generated/uapi/asm/unistd.h and
  include/generated/asm/syscalls_64/32/o32/n32.h
- Add kernel/syscall_64/32/x32.S file which will in turn
  include include/generated/asm/syscalls_64/32/o32/n32.h file
---
 arch/mips/kernel/syscall_32_o32.S | 8 ++++++++
 arch/mips/kernel/syscall_64_64.S  | 8 ++++++++
 arch/mips/kernel/syscall_64_n32.S | 7 +++++++
 arch/mips/kernel/syscall_64_o32.S | 8 ++++++++
 4 files changed, 31 insertions(+)
 create mode 100644 arch/mips/kernel/syscall_32_o32.S
 create mode 100644 arch/mips/kernel/syscall_64_64.S
 create mode 100644 arch/mips/kernel/syscall_64_n32.S
 create mode 100644 arch/mips/kernel/syscall_64_o32.S

diff --git a/arch/mips/kernel/syscall_32_o32.S b/arch/mips/kernel/syscall_32_o32.S
new file mode 100644
index 0000000..0a643f9
--- /dev/null
+++ b/arch/mips/kernel/syscall_32_o32.S
@@ -0,0 +1,8 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+
+#define __SYSCALL(nr, entry, nargs)    PTR     entry
+	
+.align 2
+.type  sys_call_table, @object
+EXPORT(sys_call_table)
+#include <asm/syscalls_32_o32.h>
diff --git a/arch/mips/kernel/syscall_64_64.S b/arch/mips/kernel/syscall_64_64.S
new file mode 100644
index 0000000..d7ae19e
--- /dev/null
+++ b/arch/mips/kernel/syscall_64_64.S
@@ -0,0 +1,8 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+
+#define __SYSCALL(nr, entry, nargs)    PTR     entry
+
+.align 3
+.type  sys_call_table, @object
+EXPORT(sys_call_table)
+#include <asm/syscalls_64_64.h>
diff --git a/arch/mips/kernel/syscall_64_n32.S b/arch/mips/kernel/syscall_64_n32.S
new file mode 100644
index 0000000..8c7734c
--- /dev/null
+++ b/arch/mips/kernel/syscall_64_n32.S
@@ -0,0 +1,7 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+
+#define __SYSCALL(nr, entry, nargs)    PTR     entry
+
+.type sysn32_call_table, @object
+EXPORT(sysn32_call_table)
+#include <asm/syscalls_64_n32.h>
diff --git a/arch/mips/kernel/syscall_64_o32.S b/arch/mips/kernel/syscall_64_o32.S
new file mode 100644
index 0000000..704b34c
--- /dev/null
+++ b/arch/mips/kernel/syscall_64_o32.S
@@ -0,0 +1,8 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+
+#define __SYSCALL(nr, entry, nargs)    PTR     entry
+
+.align 3
+.type  sys32_call_table,@object
+EXPORT(sys32_call_table)
+#include <asm/syscalls_64_o32.h>
-- 
1.9.1

